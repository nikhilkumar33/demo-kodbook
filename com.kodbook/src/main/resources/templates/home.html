<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<link href="home.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
	<nav>
		<p>Welcome 
		<span th:text="${session.username}"></span></p>
		<a href="/myprofile"><i class="fas fa-user-circle"></i> My Profile</a>
		<a href="/opennewsfeed"><i class="fas fa-home"></i> News Feed</a>
		<a href="/opencreatepost"><i class="fas fa-plus-circle"></i> Create Post</a>
	</nav>
	<h1>Post Details</h1>
	<div class="profile-details">
		<div class="posts-grid">
		<span th:each="post : ${allposts}">
			<p>
				<strong>Photo:</strong>
			</p> <img th:if="${post.photoBase64}"
			th:src="'data:image/jpeg;base64,'+${post.photoBase64}"
			alt="Profile Photo" />
			<p>
				<strong>Caption:</strong>
			</p> <span th:text="${post.caption}"></span>
			
			
			<form action="/likepost" method="post" class="like-container">
    			<input type="hidden" name="id" th:value="${post.id}"> 
			    <button class="like-button">
			        <i class="fas fa-thumbs-up"></i> 
			    </button>
			    <span class="like-count" th:text="${post.likes}"></span>
			</form>

			<form action="/addcomment" method="post" class="comment-form">
				<input type="hidden" name="id" th:value="${post.id}">
				<textarea name="comment" placeholder="Add a comment..." required></textarea>
				<input type="submit" value="Comment">
			</form> 
			
			<!-- Displaying Comments -->
			<div class="comments-section">
				<h4>Comments:</h4>
				<ul>
					<li th:each="comment : ${post.comments}">
					<span th:text="${comment}"></span>
					</li>
				</ul>
			</div>
		</span>
	</div>
	</div>
</body>
</html>